(this["webpackJsonpguest-book-app"]=this["webpackJsonpguest-book-app"]||[]).push([[0],{18:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n.n(c),o=n(11),s=n.n(o),m=(n(18),n(12)),i=n(2),u=n.n(i),l=n(3),j=n(5),d=n(6),p=n(9),h=n(8),b=n(4),f=(n(20),n(21),function(e){var t=e.imgUrl,n=e.name,c=e.message,r=e._id,o=e.removeComment;return Object(a.jsxs)("div",{className:"comment",children:[Object(a.jsx)("figure",{className:"comment__img",children:Object(a.jsx)("img",{src:t||"https://socpartnerstvo.org/img/avatar_male.png",alt:"User avatar"})}),Object(a.jsxs)("div",{className:"comment__content",children:[Object(a.jsx)("div",{className:"comment__name",children:Object(a.jsx)("h3",{children:n})}),Object(a.jsx)("div",{className:"comment__message",children:Object(a.jsx)("p",{children:c})}),Object(a.jsx)("div",{className:"comment__id",children:Object(a.jsxs)("h6",{children:["#",r]})}),Object(a.jsx)("button",{className:"comment__remove remove",type:"button",onClick:function(){o(r)},children:Object(a.jsx)("img",{className:"remove__img",src:"https://icons-for-free.com/iconfiles/png/128/delete+remove+trash+trash+bin+trash+can+icon-1320073117929397588.png",alt:"remove"})})]})]})}),v=function(e){var t=e.comments,n=e.removeComment;return Object(a.jsx)(a.Fragment,{children:t.map((function(e){return Object(a.jsx)(f,Object(b.a)({removeComment:n},e),e._id)}))})};v.defaultProps={comments:[]};var O=n(7),x=(n(22),{imgUrl:"",name:"",message:""}),g=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state=Object(b.a)({},x),e.handleChange=function(t){var n=t.target,a=n.name,c=n.value;e.setState(Object(O.a)({},a,c))},e.handleSubmit=function(t){t.preventDefault(),(0,e.props.addComment)(e.state),e.setState(Object(b.a)({},x))},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.state,t=e.imgUrl,n=e.name,c=e.message,r=this.handleChange,o=this.handleSubmit;return Object(a.jsxs)("form",{onSubmit:o,className:"form",children:[Object(a.jsx)("h2",{children:"\u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:Object(a.jsx)("input",{type:"text",name:"name",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",value:n,onChange:r,autoComplete:"off",required:!0,className:"form__input"})}),Object(a.jsx)("label",{children:Object(a.jsx)("input",{name:"imgUrl",type:"url",placeholder:"\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440 (\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)",value:t,onChange:r,autoComplete:"off",className:"form__input"})})]}),Object(a.jsx)("div",{children:Object(a.jsx)("label",{children:Object(a.jsx)("textarea",{type:"text",name:"message",placeholder:"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u0435\u0441\u044c \u0441\u0432\u043e\u0438\u043c\u0438 \u043c\u044b\u0441\u043b\u044f\u043c\u0438",value:c,onChange:r,autoComplete:"off",rows:"6",required:!0,className:"form__input"})})}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",className:"form__button",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})})]})}}]),n}(c.Component),_=(n(23),function(){var e=function(){window.scrollBy(0,1e10)};return Object(a.jsx)("button",{className:"arrow",onClick:e,onKeyDown:e,type:"button",title:"scrolling to the last comment"})}),C=(n(24),window.location.href),w=C.includes("heroku")?C:"http://localhost:4000/",y=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={comments:[]},e.componentDidMount=Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadComments();case 2:n=t.sent,e.setState({comments:n});case 4:case"end":return t.stop()}}),t)}))),e.loadComments=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(w,"books"));case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)}))),e.loadToServer=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(w,"books/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.addComment=function(){var t=Object(l.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadToServer(n);case 2:a=t.sent,e.setState((function(e){return{comments:[].concat(Object(m.a)(e.comments),[a])}}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeComment=function(){var t=Object(l.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(w,"books/").concat(n),t.next=3,fetch(a,{method:"DELETE"});case 3:e.setState((function(e){return{comments:e.comments.filter((function(e){return e._id!==n}))}}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.state.comments;return Object(a.jsxs)("div",{className:"app",children:[Object(a.jsx)("div",{className:"app__comments comments",children:Object(a.jsx)(v,{comments:e,removeComment:this.removeComment})}),Object(a.jsx)("div",{className:"app__form",children:Object(a.jsx)(g,{addComment:this.addComment})}),Object(a.jsx)(_,{})]})}}]),n}(c.Component);s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(y,{})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.e65782f7.chunk.js.map